"use strict";(self.webpackChunkorderpls=self.webpackChunkorderpls||[]).push([[925],{2925:(e,t,a)=>{a.r(t),a.d(t,{OPChefOrderTaking:()=>h});var n=a(5043),r=a(5042),s=a(8831),c=a(4301),l=a(8136),i=a(6604),d=a(2104),o=a(3003),u=a(579);const h=()=>{const[e,t]=(0,n.useState)(!1),[a,h]=(0,n.useState)(!0),[b,m]=(0,n.useState)(!1),[x,g]=(0,n.useState)(!1),p=(0,n.useRef)([]),f=(0,n.useRef)({}),_=(0,n.useRef)([]),v=(0,n.useRef)([]),j=(0,n.useRef)(null),w=((0,r.i)(),(0,o.d4)((e=>e.appstate.login_info)));function N(e){p.current=[{arrayindex:0,csstheme:{labletext:"",classname:"btn-close custom-btn-close border p-1 me-0 d-flex align-items-center justify-content-center rounded-circle",id:"btn_cross",icon:"ti ti-x"}},{arrayindex:1,csstheme:{labletext:" Take",classname:"btn btn-primary",id:"btn_take"}},{arrayindex:2,csstheme:{labletext:"Cancel",classname:"btn btn-light me-2",id:"btn_cancel"}}],function(e){v.current=e,console.log(e);let t={groupbtnname:"beanchlst",groupbtnselectedname:null,groupbtndata:e.filter((e=>"waiting"==e.status))};f.current=t}(e.hotelBench),function(){let e={tablename:"tbl_orderlist",grpbtnrowid:null,grpbtnindex:null,tableindex:null,actionButton:{hasAction:!0,hasStatus:!0,canEditRow:!0,canDeleteRow:!0},tableMetaData:{showPagination:!1,showSearch:!1},colMetaData:[{h_colindex:0,h_name:"Orders",h_width:"200px",h_txtalign:"left",h_navigate:"/home"},{h_colindex:1,h_name:"Qty",h_width:"100px",h_txtalign:"left",h_navigate:"/home"},{h_colindex:2,h_name:"Customization",h_width:"100px",h_txtalign:"left",h_navigate:"/home"},{h_colindex:3,h_name:"Sts",h_width:"100px",h_txtalign:"left",h_navigate:"/home"}],tableData:[]};_.current=e}(),t(!0),h(!1)}function k(e){switch(e.currentTarget.id){case"btn_cross":case"blurdiv":case"btn_cancel":document.body.style="",m(!1);break;case"btn_take":!function(){const e=_.current.grpbtnrowid,t=_.current.grpbtnindex,a=_.current.tableData.map((e=>({showrow:e.showrow,table_value:[{t_key:0,t_value:e.table_value[0].t_value},{t_key:1,t_value:e.table_value[1].t_value},{t_key:2,t_value:e.table_value[2].t_value},{t_key:3,t_value:"Processing"}]}))),n=w.username;f.current.groupbtndata.splice(t,1),j.current.emit("updateChefOrderTaking",e,a,n),document.body.style="",m(!1)}()}}return(0,n.useEffect)((()=>(j.current=(0,d.io)("https://canteen-billing.onrender.com"),j.current.emit("joinChefOrderTaking",w.companyName),j.current.on("sendChefrOrderTaking",(e=>{N(e)})),()=>{j.current&&j.current.disconnect()})),[]),(0,n.useEffect)((()=>(j.current.on("documentUpdated",((e,t,a)=>{"waiting"==a&&(f.current.groupbtndata.push(t),g((e=>!e)))})),()=>{})),[]),(0,u.jsxs)(u.Fragment,{children:[a&&(0,u.jsx)(s.z,{}),e&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"page-wrapper",children:(0,u.jsx)("div",{className:"content",children:(0,u.jsx)("div",{className:"row",children:(0,u.jsxs)("div",{className:"col-md-12",children:[(0,u.jsx)("div",{className:"page-header",children:(0,u.jsxs)("div",{className:"row align-items-center",children:[(0,u.jsx)("div",{className:"col-sm-4",children:(0,u.jsx)("h4",{className:"page-title",children:"pending orders"})}),(0,u.jsx)("div",{className:"col-sm-8 text-sm-end",children:(0,u.jsx)("div",{className:"head-icons"})})]})}),(0,u.jsx)("div",{className:"row",children:(0,u.jsx)("div",{className:"col-lg-12",children:(0,u.jsx)("div",{className:"card",children:(0,u.jsxs)("div",{className:"card-body",id:"card-body",children:[(0,u.jsxs)("div",{className:"border-bottom mb-3 pb-3",children:[(0,u.jsx)("h5",{className:"fw-semibold mb-1",children:"Order's"}),(0,u.jsx)("p",{children:"Choose the order that needs to be prepared"})]}),(0,u.jsx)(c.z,{groupBtnName:f.current.groupbtnname,groupBtnData:f.current.groupbtndata,handleGroupButtonClick:function(e,t){if("beanchlst"===e){document.body.style.overflow="hidden";const e=structuredClone(f.current.groupbtndata[t].btn_values);f.current.groupbtnselectedname=f.current.groupbtndata[t].studentName,_.current.grpbtnrowid=f.current.groupbtndata[t]._id,_.current.grpbtnindex=t,_.current.tableData=e}m(!0)}})]})})})})]})})})}),(0,u.jsx)("div",{className:"offcanvas offcanvas-end offcanvas-large "+(b?"show":"hiding"),children:b&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"offcanvas-header border-bottom",children:[(0,u.jsx)("h4",{children:f.current.groupbtnselectedname}),(0,u.jsx)(l.G,{ctl_Attribute:p.current[0],handleButtonClick:k})]}),(0,u.jsxs)("div",{className:"offcanvas-body",children:[(0,u.jsx)("h4",{children:"Order"}),(0,u.jsx)(i.a,{tablename:_.current.tablename,actionButton:_.current.actionButton,tableMetaData:_.current.tableMetaData,colMetaData:_.current.colMetaData,tableData:_.current.tableData,handleTableActionClick:function(e,t,a,n){e}}),(0,u.jsxs)("div",{className:"mt-4 d-flex justify-content-end",children:[(0,u.jsx)(l.G,{ctl_Attribute:p.current[2],handleButtonClick:k}),(0,u.jsx)(l.G,{ctl_Attribute:p.current[1],handleButtonClick:k})]})]})]})}),b&&(0,u.jsx)("div",{className:"offcanvas-backdrop fade show",id:"blurdiv",onClick:k})]})]})}}}]);
//# sourceMappingURL=925.79a195f7.chunk.js.map