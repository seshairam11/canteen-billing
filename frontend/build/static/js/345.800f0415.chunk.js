"use strict";(self.webpackChunkorderpls=self.webpackChunkorderpls||[]).push([[345],{345:(e,t,r)=>{r.r(t),r.d(t,{OPServerOrderCompleted:()=>h});var a=r(5043),n=r(5042),l=r(8831),c=r(4301),s=r(8136),o=(r(960),r(3542),r(6604)),i=r(2104),d=r(3003),u=r(579);const h=()=>{const[e,t]=(0,a.useState)(!0),[r,h]=(0,a.useState)(!1),[m,b]=(0,a.useState)(!0),[x,p]=(0,a.useState)(!1),[f,v]=(0,a.useState)(!1),[_,g]=(0,a.useState)(!1),[y,w]=(0,a.useState)(!1),j=(0,a.useRef)([]),N=(0,a.useRef)({}),k=(0,a.useRef)([]),D=(0,a.useRef)([]),C=(0,a.useRef)(null),S=(0,n.i)(),O=(0,d.d4)((e=>e.appstate.login_info));function B(e){let t=[{arrayindex:0,csstheme:{labletext:"Menu",classname:"form-control",id:"txt_test",length:50,readonly:!1,hinttext:"Enter your Order"},inputvalue:"",tooltip:{place:"right",classname:"tooltip-react",isfocus:"",errorshow:"",isvalidation:!1},validate:{mandatory:!0,datatype:"searchBox"},error:{errorshow:!1,errormsg:"The field is mandatory"},dropdownlist:e.menuList.map((e=>({m_key:e._id,m_value:e.menuItem})))},{arrayindex:1,csstheme:{labletext:"Qty",classname:"form-control",id:"num_qty",length:2,readonly:!1,hinttext:"Enter your Quantity"},inputvalue:"",tooltip:{place:"bottom",classname:"tooltip-react",isfocus:"",errorshow:"",isvalidation:!1},validate:{mandatory:!0,datatype:"numeric"},error:{errorshow:!1,errormsg:"The field is mandatory"}},{arrayindex:2,csstheme:{labletext:"",classname:"btn-close",id:"btn_crosssearch",icon:"ti ti-x"}},{arrayindex:3,csstheme:{labletext:"cancel",classname:"btn btn-light me-2",id:"btn_cancel_search"}},{arrayindex:4,csstheme:{labletext:"Confirm",classname:"btn btn-danger",id:"btn_confirm_search"}},{arrayindex:5,csstheme:{labletext:"",classname:"btn-close custom-btn-close border p-1 me-0 d-flex align-items-center justify-content-center rounded-circle",id:"btn_cross",icon:"ti ti-x"}},{arrayindex:6,csstheme:{labletext:"Add Order",classname:"label-add btn2lnk",id:"btn_addorder",icon:"ti ti-square-rounded-plus"}},{arrayindex:7,csstheme:{labletext:" Save",classname:"btn btn-primary",id:"btn_save"}},{arrayindex:8,csstheme:{labletext:"Cancel",classname:"btn btn-light me-2",id:"btn_cancel"}},{arrayindex:9,csstheme:{labletext:"Delete",classname:"btn btn-primary me-2",id:"btn_completed"}}];j.current=t,function(e){D.current=e;let t={groupbtnname:"beanchlst",groupbtnselectedname:null,groupbtndata:e.filter((e=>"close"==e.status))};N.current=t}(e.hotelBench),function(){let e={tablename:"tbl_orderlist",grpbtnrowid:null,grpbtnindex:null,tableindex:null,actionButton:{hasAction:!0,hasStatus:!0,canEditRow:!0,canDeleteRow:!0},tableMetaData:{showPagination:!1,showSearch:!1},colMetaData:[{h_colindex:0,h_name:"Orders",h_width:"200px",h_txtalign:"left",h_navigate:"/home"},{h_colindex:1,h_name:"Qty",h_width:"100px",h_txtalign:"left",h_navigate:"/home"},{h_colindex:1,h_name:"Customization",h_width:"100px",h_txtalign:"left",h_navigate:"/home"},{h_colindex:2,h_name:"Sts",h_width:"100px",h_txtalign:"left",h_navigate:"/home"}],tableData:[]};k.current=e}(),h(!0),b(!1)}function M(e){let t=e.currentTarget.id;switch(console.log(t),t){case"btn_addorder":k.current.tableaction=0,k.current.tableindex=null,v(!0);break;case"btn_cross":case"blurdiv":case"btn_cancel":document.body.style="",p(!1);break;case"btn_completed":!function(){const e=k.current.grpbtnrowid,t=N.current.groupbtndata.findIndex((t=>t._id===e));N.current.groupbtndata.splice(t,1),C.current.emit("deleteServerOrderCompleted",e),document.body.style="",p(!1)}();break;case"btn_crosssearch":case"btn_cancel_search":j.current[0].inputvalue="",j.current[0].error.errorshow=!1,j.current[1].inputvalue="",j.current[1].error.errorshow=!1,v(!1);break;case"btn_confirm_search":!function(){let e=!0,t=[],r=[];t.push(S(j.current[0])),t.push(S(j.current[1]));for(let a=0;a<t.length;a++)!0===t[a].founderror&&(e=!1,j.current[t[a].arrayindex].error.errorshow=!0,r.push(t[a]));if(!1===e)j.current[r[r.length-1].arrayindex].tooltip.isvalidation=!1,j.current[r[r.length-1].arrayindex].tooltip.isfocus.focus(),g(!_);else{let e=[{t_key:0,t_value:j.current[0].inputvalue},{t_key:1,t_value:j.current[1].inputvalue}];if(0===k.current.tableaction){let t=[{t_key:2,t_value:"New"}];k.current.tableData.push({showrow:!0,rowmode:0,table_value:e.concat(t)})}else if(1===k.current.tableaction){let t=k.current.tableData[k.current.tableindex].table_value[2],r={showrow:!0,rowmode:1,table_value:e.concat(t)};k.current.tableData.splice(k.current.tableindex,1,r)}j.current[0].inputvalue="",j.current[1].inputvalue="",w(!0),v(!1)}}()}}return(0,a.useEffect)((()=>(C.current=(0,i.io)("https://canteen-billing.onrender.com"),C.current.emit("joinServerOrderCompleted","mgr orderup",O.collageid),C.current.on("sendServerOrderCompleted",(e=>{B(e),console.log(e)})),C.current.on("documentUpdated",((e,t,r)=>{"close"==r&&(console.log(t),N.current.groupbtndata.push(t),g((e=>!e)))})),()=>{C.current&&C.current.disconnect()})),[]),(0,u.jsxs)(u.Fragment,{children:[m&&(0,u.jsx)(l.z,{}),r&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"page-wrapper",children:(0,u.jsx)("div",{className:"content",children:(0,u.jsx)("div",{className:"row",children:(0,u.jsxs)("div",{className:"col-md-12",children:[(0,u.jsx)("div",{className:"page-header",children:(0,u.jsxs)("div",{className:"row align-items-center",children:[(0,u.jsx)("div",{className:"col-sm-4",children:(0,u.jsx)("h4",{className:"page-title",children:"Order Completed"})}),(0,u.jsx)("div",{className:"col-sm-8 text-sm-end",children:(0,u.jsx)("div",{className:"head-icons"})})]})}),(0,u.jsx)("div",{className:"row",children:(0,u.jsx)("div",{className:"col-lg-12",children:(0,u.jsx)("div",{className:"card",children:(0,u.jsxs)("div",{className:"card-body",id:"card-body",children:[(0,u.jsxs)("div",{className:"border-bottom mb-3 pb-3",children:[(0,u.jsx)("h5",{className:"fw-semibold mb-1",children:"Order's"}),(0,u.jsx)("p",{children:"Your order has been successfully completed!"})]}),(0,u.jsx)(c.z,{groupBtnName:N.current.groupbtnname,groupBtnData:N.current.groupbtndata,handleGroupButtonClick:function(e,t){if(console.log(e),console.log(t),"beanchlst"===e){document.body.style.overflow="hidden";const e=structuredClone(N.current.groupbtndata[t].btn_values);N.current.groupbtnselectedname=N.current.groupbtndata[t].labelname,k.current.grpbtnrowid=N.current.groupbtndata[t]._id,k.current.tableData=e}p(!0)}})]})})})})]})})})}),x&&(0,u.jsx)("div",{className:"offcanvas-backdrop fade show",id:"blurdiv",onClick:M}),(0,u.jsx)("div",{className:"offcanvas offcanvas-end offcanvas-large "+(x?"show":"hiding"),children:x&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"offcanvas-header border-bottom",children:[(0,u.jsx)("h4",{children:N.current.groupbtnselectedname}),(0,u.jsx)(s.G,{ctl_Attribute:j.current[5],handleButtonClick:M})]}),(0,u.jsxs)("div",{className:"offcanvas-body",children:[(0,u.jsx)("div",{className:"d-flex align-items-center justify-content-between mb-2",children:(0,u.jsx)("h4",{children:"Order"})}),(0,u.jsx)(o.a,{tablename:k.current.tablename,actionButton:k.current.actionButton,tableMetaData:k.current.tableMetaData,colMetaData:k.current.colMetaData,tableData:k.current.tableData,handleTableActionClick:function(e,t,r,a){if("tbl_orderlist"===e)!function(e,t,r){if(2===r)k.current.tableData.splice(e,1),g(!_);else if(1===r){k.current.tableaction=1,k.current.tableindex=e;let t=k.current.tableData[e].table_value;j.current[0].inputvalue=t[0].t_value,j.current[1].inputvalue=t[1].t_value,v(!0)}}(t,0,a)}}),(0,u.jsx)("div",{className:"mt-4 d-flex justify-content-end",children:(0,u.jsx)(s.G,{ctl_Attribute:j.current[9],handleButtonClick:M})})]})]})})]})]})}}}]);
//# sourceMappingURL=345.800f0415.chunk.js.map