"use strict";(self.webpackChunkorderpls=self.webpackChunkorderpls||[]).push([[929],{4310:(e,t,a)=>{a.r(t),a.d(t,{OPServerOrderPlacing:()=>m});var r=a(5043),n=a(5042),l=a(8831),s=(a(4301),a(8136)),c=a(960),i=a(3542),o=a(6604),d=a(2104),u=a(3003),h=a(579);const m=()=>{const[e,t]=(0,r.useState)(!1),[a,m]=(0,r.useState)(!0),[b,x]=(0,r.useState)(!1),[v,_]=(0,r.useState)(!1),[p,f]=(0,r.useState)(!1),g=(0,r.useRef)([]),y=(0,r.useRef)({}),j=(0,r.useRef)([]),w=((0,r.useRef)([]),(0,r.useRef)(null)),N=(0,n.i)(),k=(0,u.d4)((e=>e.appstate.login_info));function D(e){console.log(e);let a=[{arrayindex:0,csstheme:{labletext:"Menu",classname:"form-control",id:"txt_test",length:50,readonly:!1,hinttext:"Enter your Order"},inputvalue:"",tooltip:{place:"right",classname:"tooltip-react",isfocus:"",errorshow:"",isvalidation:!1},validate:{mandatory:!0,datatype:"searchBox"},error:{errorshow:!1,errormsg:"The field is mandatory"},dropdownlist:e.menuList.map((e=>({m_key:e._id,m_value:{menu:e.menuItem,price:e.price}})))},{arrayindex:1,csstheme:{labletext:"Qty",classname:"form-control",id:"num_qty",length:2,readonly:!1,hinttext:"Enter your Quantity"},inputvalue:"",tooltip:{place:"bottom",classname:"tooltip-react",isfocus:"",errorshow:"",isvalidation:!1},validate:{mandatory:!0,datatype:"numeric"},error:{errorshow:!1,errormsg:"The field is mandatory"}},{arrayindex:2,csstheme:{labletext:"",classname:"btn-close",id:"btn_crosssearch",icon:"ti ti-x"}},{arrayindex:3,csstheme:{labletext:"cancel",classname:"btn btn-light me-2",id:"btn_cancel_search"}},{arrayindex:4,csstheme:{labletext:"Confirm",classname:"btn btn-danger",id:"btn_confirm_search"}},{arrayindex:5,csstheme:{labletext:"",classname:"btn-close custom-btn-close border p-1 me-0 d-flex align-items-center justify-content-center rounded-circle",id:"btn_cross",icon:"ti ti-x"}},{arrayindex:6,csstheme:{labletext:"Add Order",classname:"label-add btn2lnk",id:"btn_addorder",icon:"ti ti-square-rounded-plus"}},{arrayindex:7,csstheme:{labletext:"Save",classname:"btn btn-primary",id:"btn_save"}},{arrayindex:8,csstheme:{labletext:"Cancel",classname:"btn btn-light me-2",id:"btn_cancel"}},{arrayindex:9,csstheme:{labletext:"Customization",classname:"form-control",id:"num_mod",length:50,readonly:!1,hinttext:"Enter your Customization"},inputvalue:"",tooltip:{place:"bottom",classname:"tooltip-react",isfocus:"",errorshow:"",isvalidation:!1},validate:{mandatory:!1,datatype:"default"},error:{errorshow:!1,errormsg:"The field is mandatory"}}];g.current=a,function(){let e={tablename:"tbl_orderlist",grpbtnrowid:null,grpbtnindex:null,tableindex:null,actionButton:{hasAction:!0,hasStatus:!0,canEditRow:!0,canDeleteRow:!0},tableMetaData:{showPagination:!1,showSearch:!1},colMetaData:[{h_colindex:0,h_name:"Orders",h_width:"200px",h_txtalign:"left",h_navigate:"/home"},{h_colindex:1,h_name:"Qty",h_width:"100px",h_txtalign:"left",h_navigate:"/home"},{h_colindex:2,h_name:"Customization",h_width:"100px",h_txtalign:"left",h_navigate:"/home"},{h_colindex:3,h_name:"Sts",h_width:"100px",h_txtalign:"left",h_navigate:"/home"}],tableData:[]};j.current=e}(),t(!0),m(!1)}function C(e){let t=e.currentTarget.id;switch(console.log(t),t){case"btn_addorder":j.current.tableaction=0,j.current.tableindex=0,console.log(j.current.tableData),_(!0);break;case"btn_cross":case"blurdiv":case"btn_cancel":document.body.style="",x(!1);break;case"btn_save":console.log(j.current.tableData.length),0!=j.current.tableData.length?function(){const e=j.current.tableData.map((e=>({showrow:e.showrow,table_value:[{t_key:0,t_value:e.table_value[0].t_value},{t_key:1,t_value:e.table_value[1].t_value},{t_key:2,t_value:e.table_value[2].t_value},{t_key:3,t_value:"Waiting"}]})));console.log(e);const t=k.userName,a=k.collageid;w.current.emit("updateServerOrderPlacing",e,t,a),document.body.style="",x(!1)}():alert("Order can't be empty");break;case"btn_crosssearch":case"btn_cancel_search":g.current[0].inputvalue="",g.current[0].error.errorshow=!1,g.current[1].inputvalue="",g.current[1].error.errorshow=!1,g.current[9].inputvalue="",g.current[9].error.errorshow=!1,_(!1);break;case"btn_confirm_search":!function(){let e=!0,t=[],a=[];t.push(N(g.current[9])),t.push(N(g.current[0])),t.push(N(g.current[1]));for(let r=0;r<t.length;r++)!0===t[r].founderror&&(e=!1,g.current[t[r].arrayindex].error.errorshow=!0,a.push(t[r]));if(!1===e)g.current[a[a.length-1].arrayindex].tooltip.isvalidation=!1,g.current[a[a.length-1].arrayindex].tooltip.isfocus.focus(),f(!p);else{let e=[{t_key:0,t_value:g.current[0].inputvalue},{t_key:1,t_value:g.current[1].inputvalue},{t_key:2,t_value:g.current[9].inputvalue}];if(0===j.current.tableaction){let t=[{t_key:3,t_value:"New"}];j.current.tableData.push({showrow:!0,rowmode:0,table_value:e.concat(t)})}else if(1===j.current.tableaction){let t=j.current.tableData[j.current.tableindex].table_value[2],a={showrow:!0,rowmode:1,table_value:e.concat(t)};j.current.tableData.splice(j.current.tableindex,1,a)}g.current[0].inputvalue="",g.current[1].inputvalue="",g.current[9].inputvalue="",_(!1)}}()}}return(0,r.useEffect)((()=>(w.current=(0,d.io)("https://canteen-billing-1.onrender.com"),w.current.emit("joinServerOrderPlacing","mgr orderup"),w.current.on("sendServerOrderPlacing",(e=>{D(e)})),()=>{w.current&&w.current.disconnect()})),[]),(0,h.jsxs)(h.Fragment,{children:[a&&(0,h.jsx)(l.z,{}),e&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"page-wrapper",children:(0,h.jsx)("div",{className:"content",children:(0,h.jsx)("div",{className:"row",children:(0,h.jsxs)("div",{className:"col-md-12",children:[(0,h.jsx)("div",{className:"page-header",children:(0,h.jsxs)("div",{className:"row align-items-center",children:[(0,h.jsx)("div",{className:"col-sm-4",children:(0,h.jsx)("h4",{className:"page-title",children:"Order Placing"})}),(0,h.jsx)("div",{className:"col-sm-8 text-sm-end",children:(0,h.jsx)("div",{className:"head-icons"})})]})}),(0,h.jsx)("div",{className:"row",children:(0,h.jsx)("div",{className:"col-lg-12",children:(0,h.jsx)("div",{className:"card",children:(0,h.jsxs)("div",{className:"card-body",id:"card-body",children:[(0,h.jsxs)("div",{className:"border-bottom mb-3 pb-3",children:[(0,h.jsx)("h5",{className:"fw-semibold mb-1",children:"Order's"}),(0,h.jsx)("p",{children:"View the Order status that you want"})]}),(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("button",{style:{border:"none",backgroundColor:"transparent",fontSize:"200px",width:"100%",fontWeight:"lighter"},id:"addbutton",onClick:function(){document.body.style.overflow="hidden",y.current.groupbtnselectedname="New Order",j.current.grpbtnrowid=null,j.current.tableData=[],x(!0)},children:(0,h.jsx)("i",{className:"ti ti-octagon-plus",style:{opacity:.5}})})})]})})})})]})})})}),(0,h.jsx)("div",{className:"offcanvas offcanvas-end offcanvas-large "+(b?"show":"hiding"),children:b&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"offcanvas-header border-bottom",children:[(0,h.jsx)("h4",{children:y.current.groupbtnselectedname}),(0,h.jsx)(s.G,{ctl_Attribute:g.current[5],handleButtonClick:C})]}),(0,h.jsxs)("div",{className:"offcanvas-body",children:[(0,h.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[(0,h.jsx)("h4",{children:"Order"}),(0,h.jsx)(s.G,{ctl_Attribute:g.current[6],handleButtonClick:C})]}),(0,h.jsx)(o.a,{tablename:j.current.tablename,actionButton:j.current.actionButton,tableMetaData:j.current.tableMetaData,colMetaData:j.current.colMetaData,tableData:j.current.tableData,handleTableActionClick:function(e,t,a,r){if("tbl_orderlist"===e)!function(e,t,a){if(2===a)j.current.tableData.splice(e,1),f(!p);else if(1===a){j.current.tableaction=1,j.current.tableindex=e;let t=j.current.tableData[e].table_value;g.current[0].inputvalue=t[0].t_value,g.current[1].inputvalue=t[1].t_value,g.current[9].inputvalue=t[2].t_value,_(!0)}}(t,0,r)}}),(0,h.jsxs)("div",{className:"mt-4 d-flex justify-content-end",children:[(0,h.jsx)(s.G,{ctl_Attribute:g.current[8],handleButtonClick:C}),(0,h.jsx)(s.G,{ctl_Attribute:g.current[7],handleButtonClick:C})]})]})]})}),b&&(0,h.jsx)("div",{className:"offcanvas-backdrop fade show",id:"blurdiv",onClick:C}),(0,h.jsx)("div",{className:"modal custom-modal fade "+(v?"show":"hidding"),style:{display:v?"block":"none"},children:v&&(0,h.jsx)("div",{className:"modal-dialog modal-dialog-centered ",children:(0,h.jsxs)("div",{className:"modal-content",style:{height:"400px"},children:[(0,h.jsxs)("div",{className:"modal-header",children:[(0,h.jsx)("h5",{className:"modal-title",children:"Order Please"}),(0,h.jsx)(s.G,{ctl_Attribute:g.current[2],handleButtonClick:C})]}),(0,h.jsx)("div",{className:"modal-body",children:(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-md-10",children:(0,h.jsx)("div",{className:"mb-5",children:(0,h.jsx)(c.s,{ctl_Attribute:g.current[0],rerender:p})})}),(0,h.jsx)("div",{className:"col-md-2",children:(0,h.jsx)("div",{className:"mb-5",children:(0,h.jsx)(i.S,{ctl_Attribute:g.current[1],rerender:p})})}),(0,h.jsx)("div",{className:"col-md-12",children:(0,h.jsx)(i.S,{ctl_Attribute:g.current[9],rerender:p})}),(0,h.jsx)("div",{className:"modal-btn text-end",style:{marginTop:"85px"},children:(0,h.jsxs)("div",{className:"mb-3",children:[(0,h.jsx)(s.G,{ctl_Attribute:g.current[3],handleButtonClick:C}),(0,h.jsx)(s.G,{ctl_Attribute:g.current[4],handleButtonClick:C})]})})]})})]})})})]})]})}}}]);
//# sourceMappingURL=929.92c2dd29.chunk.js.map